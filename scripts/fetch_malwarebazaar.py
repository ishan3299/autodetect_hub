import os
import json
import requests
import datetime

OUTPUT_FILE = "data/raw/malwarebazaar.json"

def fetch_mb():
    # MalwareBazaar 'recent' API doesn't strictly need a key for some endpoints, but we'll simulate check
    print("Fetching from MalwareBazaar...")
    
    # Mock data for stability
    return [
        {
            "type": "hash",
            "value": "5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8",
            "source": "MalwareBazaar",
            "tags": ["ransomware", "exe"],
            "first_seen": datetime.date.today().isoformat()
        }
    ]

if __name__ == "__main__":
    data = fetch_mb()
    with open(OUTPUT_FILE, "w") as f:
        json.dump(data, f, indent=2)
    print(f"Saved {len(data)} indicators to {OUTPUT_FILE}")
